<!--SCRIPTS-->
<%- js('assets/js/script.min.js') %>
<!--SCRIPTS END-->
<% if (theme.disqus_shortname && is_post() && post.comments) { %>
    <script type="text/javascript">
        var disqus_shortname = '<%= theme.disqus_shortname %>';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
<% } %>
<% if (theme.swiftype_install_key) { %>
    <script type="text/javascript">
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
            e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','<%= theme.swiftype_install_key %>','2.0.0');
    </script>
<% } %>
<% if (theme.mermaid.enable) { %>
    <!-- <%- js('assets/js/mermaid.min.js') %> -->

    <!-- if CDN fails, use local file -->
    <script src="https://unpkg.com/mermaid@8.4.6/dist/mermaid.min.js"></script>
    <script> window.mermaid || document.write('<script src="/assets/js/mermaid.min.js"><\/script>')</script>

    <script>
        $(document).ready(function() {
            var mermaid_config = {
                startOnLoad: true,
                theme: '<%- theme.mermaid.theme %>',
                flowchart:{
                    useMaxWidth: false,
                    htmlLabels: true
                }                
            }
            mermaid.initialize(mermaid_config);
        });
    </script>
<% } %>